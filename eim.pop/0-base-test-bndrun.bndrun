-include: ${workspace}/eim/eim.bndrun

-tester: biz.aQute.tester.junit-platform

# Needed for Mockito's mocking to work
#-runsystempackages.objenesis: sun.misc,sun.reflect

## CodeCoverage with JaCoco (version is picked from MavenCentral)
-runpath.jacoco:\
    org.jacoco.agent,\
    org.jacoco:org.jacoco.agent:jar:runtime

-runstorage: rt

-runvm.coverage: -javaagent:${repo;org.jacoco:org.jacoco.agent:jar:runtime;latest}=destfile=1-integration-pop_jacoco.exec

-runproperties.continuos-test: \
    tester.continuous=false,\
    tester.trace=true,\
    launch.services=true,\

-runrequires.continuous-test: \
    ${testing},\
    bnd.identity;id='eim.pop'

#-runbundles+: \
#   junit-platform-commons;          startlevel=1,\
#   junit-platform-engine;           startlevel=1,\
#   junit-platform-launcher;         startlevel=1,\
#    biz.aQute.tester.junit-platform; startlevel=2,\
#    *;                               startlevel=3
